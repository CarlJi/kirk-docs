# 2.4 服务管理
- [2.4.1 添加服务](#jump1)
- [2.4.2 查看服务日志](#jump2)
- [如何进入服务日志页面？](#jump21)
- [如何按容器筛选日志？](#jump22)
- [如何按时间筛选日志？](#jump23)

## <span id="jump1">2.4.1 添加服务</span>


1）**服务名**
>要求：长度为2-32, 可以是小写字母或数字, 首字符必须是小写字母

2）**服务类型**：分**无状态**和**有状态**两种类型
>无状态：只支持数据临时存储的服务，数据会在容器销毁后丢失
>
>有状态：支持持久化存储数据的服务，数据不会因为容器的销毁而丢失。选择有状态类型之后，需要

3）**镜像地址**：选定镜像后显示
>镜像地址：仓库地址/namespace/镜像名称:tag号

4）**镜像仓库**：点击**选择镜像**后弹出
>**镜像类型**
>>公有镜像：平台用户均可见
>>
>>私有镜像：需要鉴权访问，一个命名空间下的私有镜像对该命名空间下的所有用户可见。

　
>**镜像信息**
>>镜像：namespace/镜像名称
>>
>>最新版本：最新更新上传的版本号
>>
>>版本数：创建至今累计上传版本数(不包括删除版本)
>>
>>所选版本：当前服务需要部署的镜像版本号(默认显示最新版本)
>>
>>操作：部署镜像

![](/media/yingyongguanli-gongyoujingxiang.png)

#### 基本配置
5）**容器规格**：提供四种规格
>1U1G：单个容器配1个CPU和1G内存资源
>
>1U2G：单个容器配1个CPU和2G内存资源
>
>2U2G：单个容器配2个CPU和2G内存资源
>
>2U4G：单个容器配2个CPU和4G内存资源

6）**容器数量**：当前服务需要配置的容器实例数，可以通过**服务升级**(详见)进行扩缩容。

7）**网络配置**：配置服务在集群内部和外部的访问方法

>**内部访问和外部访问**
>>内部访问：服务之间如果有网络的访问需求，可以通过配置环境变量实现，格式为 **应用名-服务名:端口号**
>>
>>外部访问：开启 **集群外访问** 开关，平台将自动分配一个随机的外部访问域名

　
>**容器端口**
>>metadata自动配置：如果该镜像在metadata中约束了端口号，镜像选定后，平台将自动配置

　
>**协议类型**
>>metadata自动配置：如果该镜像在metadata中约束了协议类型，镜像选定后，平台将自动配置

8）**存储卷配置**：服务类型为有状态时才需要配置
>**存储卷类型**
>>云盘：使用ceph块存储方案，具备高可靠性和可用性的特色。

　
>**读写方式**
>>读写：允许该服务对挂载盘进行读和写两种操作
>>
>>只读：只允许该服务对挂载盘进行读操作

　
>**选择存储卷**：下拉选择 **存储列表** 内的存储卷进行服务挂载
>>新增存储卷：如果下拉列表内没有目标挂载卷，可以立即新增一个
>>- 名称：存储卷名称(长度为2-32, 可以是小写字母或数字, 首字符必须是小写字母
>>- 大小：最小为1G，最大为500G，调整粒度为1G

<span style="color:red">注意：存储卷一旦创建成功，名称、大小无法修改</span>

![](/media/yingyongguanli-tianjiacunchujuan.jpeg)

#### 高级配置
9）**环境变量**
>**加载方式**
>>手动填写：手动输入变量值
>>
>>配置中心(详见)：通过选择配置中心的配置项快捷定义变量值

10）**运行目录**：镜像内启动程序的路径

11）**执行命令**：容器启动后执行的命令

12）**执行参数**：执行命令的参数，多个参数时用空格隔开

## <span id="jump2">2.4.2 查看服务日志</span>
服务日志功能实现了当前服务下所有容器的日志聚类，用户能够通过简单的下拉操作完成服务下全部容器或者单个容器的日志筛选。

1）<span id="jump21">**如何进入服务日志页面？**</span>

操作如下：

1. 选中左侧"应用"

2. 点击想要查看应用的"应用名"，截图中所示"wordpress"

3. 点击想要查看服务的"服务名"，截图中所示"web"

4. 点击"日志"，这就进入了目标服务的日志页面

![](/media/yingyongguanli-yingyong.png)

![](/media/yingyongguanli-fuwu.png)

![](/media/yingyongguanli-rizhi.png)

2）<span id="jump22">**如何按容器筛选日志？**</span>

下拉"容器名称"进行筛选，有 **全部容器** 或 **容器名称** 两种方式。
> 全部容器：同时显示该服务下所有容器的日志信息
> 容器名称：只显示选中容器的日志信息

![](/media/yingyongguanli-rongqimingchen.png)

3）<span id="jump23">**如何按时间筛选日志？**</span>

提供 **实时 / 最近3小时 / 最近1天 / 最近1周 / 自定义** 5种选项。
> 实时：实时查看容器日志信息，仅限单个容器时操作。
>
> 最新3小时：可以查看最近3个小时的容器日志信息。
>
> 最近1天：可以查看最近1天的容器日志信息。
>
> 最近1周：可以查看最近1周的容器日志信息。
>
> 自定义：






















